<!DOCTYPE html>
<html>

<head>
  <link href="styles.css" rel="stylesheet" type="text/css">
  <script src="https://unpkg.com/jspsych"></script>
  <script src="../dist/index.browser.js"></script>
  <link href="https://unpkg.com/jspsych/css/jspsych.css" rel="stylesheet" type="text/css">
</head>

<body></body>
<script>
  const jsPsych = initJsPsych({
    on_finish: function () {
      jsPsych.data.displayData();
      // jsPsych.data.get().localSave("csv", "llm_trial.csv");
    },
  });

  // Declaring the prompts necessary
  prompts = [
    {
      message: "Welcome to the chatroom!",
      role: "system-prompt",
      message_trigger: 0
    },

    //timer trigger in ms
    //"chatbot" = chatbot will say the thing typed in the prompt
    {
      message: "Hey there! I'm Adorabot, here to chat about a disputed topic in the U.S. Which topic would you like to discuss: human euthanasia, gender inequality, the role of government in healthcare, the atomic bombing of Hiroshima and Nagasaki, mandating vaccines, criminal justice reforms, or same- sex marriage. Let me know what you want to talk about!",
      role: "chatbot-message",
      message_trigger: 0
    }
  ]
  
  prompt_chain = {
      message_trigger: 1,
      // timer_trigger: 1,
      prompts: ["Identify the user's main argument.", "In one sentence, akcnowledge the user's perspective. Provide an alternative perspective and relate it to the user's experience."], // Ask the user what has led them to believe in the argument below.
    }

  continue_button = {
    message_trigger: 6,
    message: "You have completed your six round of back-and-forth with Adorabot! Click continue to end the experiment. Thank you for your time.",
  }

  const trial = {
    type: jsPsychChat,
    ai_prompt: "Ask the user what their thoughts are on the topic and ask them to explain their experience.",
    continue_button: continue_button,
    chat_field_placeholder: "be nice...",
    additional_prompts: prompts,
    prompt_chain: prompt_chain
  }
  //past prompts
  // "In a conversational tone, concisely present specific counterarguments to the user's points. Briefly acknowledge the user's point and ask for their specific thought on your response."

  jsPsych.run([trial]);
</script>

</html>