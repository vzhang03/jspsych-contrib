<!DOCTYPE html>
<html>

<head>
  <link href="styles.css" rel="stylesheet" type="text/css">
  <script src="https://unpkg.com/jspsych"></script>
  <script src="../dist/index.browser.js"></script>
  <link href="https://unpkg.com/jspsych/css/jspsych.css" rel="stylesheet" type="text/css">
</head>

<body></body>
<script>
  const jsPsych = initJsPsych({
    on_finish: function () {
      jsPsych.data.displayData();
      jsPsych.data.get().localSave("csv", "llm_trial.csv");
    },
  });

  // Declaring the prompts necessary
  prompts = [
    {
      message: "Welcome to the chatroom!",
      role: "prompt",
      message_trigger: 0
    },

    //timer trigger in ms
    //"chatbot" = chatbot will say the thing typed in the prompt
    {
      message: "Hey there! I'm Adorabot, here to chat about a disputed topic in the U.S. Which topic would you like to discuss: human euthanasia, gender inequality, the role of government in healthcare, the atomic bombing of Hiroshima and Nagasaki, mandating vaccines, criminal justice reforms, or same- sex marriage. Let me know what you want to talk about!",
      role: "chatbot",
      message_trigger: 0
    }
  ]

  continue_button = {
    message_trigger: 6,
    prompt: "You have completed your six round of back-and-forth with Adorabot! Click continue to end the experiment. Thank you for your time.",
  }

  const trial = {
    type: jsPsychChat,
    ai_prompt: "Concisely present one counterargument and one alternative perspective for the main poin the user raises in a conversational tone. Briefly acknowledge the user's point and ask for their thoughts on the matter.",
    continue_button: continue_button,
    chat_field_placeholder: "be nice...",
    additional_prompts: prompts,
  }

  jsPsych.run([trial]);
</script>

</html>