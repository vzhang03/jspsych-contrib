<!DOCTYPE html>
<html>
  <head>
    <link href="styles.css" rel="stylesheet" type="text/css">
    <script src="https://unpkg.com/jspsych"></script>
    <script src="../dist/index.browser.js"></script>
    <link href="https://unpkg.com/jspsych/css/jspsych.css" rel="stylesheet" type="text/css">
  </head>
  <body></body>
  <script>
    const jsPsych = initJsPsych({
      on_finish: function() {
        jsPsych.data.displayData();
      },
    });

    // Declaring the prompts necessary
    prompts = [
      {
        prompt: "Welcome to this trial",
        role: "prompt",
        message_trigger: 0,
        timer_trigger: 1000000,
      },
      
      //timer trigger in ms
      //"chatbot" = chatbot will say the thing typed in the prompt
      {
        prompt: "Triggers on 100 'timer_trigger'",
        role: "chatbot",
        message_trigger: 10000,
        timer_trigger: 100,
      },

      //USER FORCIBLY SENDS THE MESSAGE IN PROMPT, and ChatBot will respond automatically
      {
        prompt: "YELL AT ME AND SAY SOMETHING MEAN",
        role: "chatbot-fetch",
        message_trigger: 3,
        timer_trigger: 1000000,
      }
    ]

    continue_button = {
      timer_trigger: 1000000,
      message_trigger: 1,
      prompt: "The continue button will appear in the bottom right corner, please continue when you feel ready",
    }

    const trial = {
      type: jsPsychChat,
      ai_prompt: "Pretend to be a comedian and include a joke at the end of every response",
      continue_button: continue_button,
      chat_field_placeholder: "be nice...",
      additional_prompts: prompts,
    }

    jsPsych.run([trial]);
  </script>
</html>